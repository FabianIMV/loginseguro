{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{Box,Button,Container,FormControl,FormLabel,Input,VStack,Heading,useToast,Alert,AlertIcon,AlertTitle,AlertDescription,Text,Code,Progress}from'@chakra-ui/react';import{supabase}from'../lib/supabaseClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LOCK_TIME=15*60;// 15 minutos en segundos\nconst MAX_ATTEMPTS=3;export default function Login(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[isLoading,setIsLoading]=useState(false);const[attempts,setAttempts]=useState(()=>{const savedAttempts=localStorage.getItem('loginAttempts');return savedAttempts?parseInt(savedAttempts):0;});const[timeRemaining,setTimeRemaining]=useState(()=>{const lockUntil=localStorage.getItem('lockUntil');if(lockUntil){const remaining=Math.max(0,parseInt(lockUntil)-Date.now());return Math.floor(remaining/1000);}return 0;});const navigate=useNavigate();const toast=useToast();const TEST_CREDENTIALS={email:'test@test.com',password:'Test123!'};useEffect(()=>{let timer;if(timeRemaining>0){timer=setInterval(()=>{setTimeRemaining(prev=>{const newTime=prev-1;if(newTime<=0){setAttempts(0);localStorage.removeItem('loginAttempts');localStorage.removeItem('lockUntil');return 0;}return newTime;});},1000);}return()=>{if(timer)clearInterval(timer);};},[timeRemaining]);useEffect(()=>{const checkSession=async()=>{const{data:{session}}=await supabase.auth.getSession();if(session){navigate('/profile');}};checkSession();},[navigate]);const validateInput=input=>{const dangerousPatterns=[/SELECT.*FROM/i,/INSERT.*INTO/i,/UPDATE.*SET/i,/DELETE.*FROM/i,/<script>/i,/'/,/;/,/--/];return!dangerousPatterns.some(pattern=>pattern.test(input));};const handleLockout=()=>{const lockUntil=Date.now()+LOCK_TIME*1000;localStorage.setItem('lockUntil',lockUntil.toString());setTimeRemaining(LOCK_TIME);toast({title:'Cuenta bloqueada',description:`Demasiados intentos fallidos. Por favor espere 15 minutos.`,status:'error',duration:5000,isClosable:false});};const handleSubmit=async e=>{e.preventDefault();if(timeRemaining>0){toast({title:'Cuenta bloqueada',description:`Por favor espere ${Math.floor(timeRemaining/60)}:${(timeRemaining%60).toString().padStart(2,'0')} minutos`,status:'error',duration:5000});return;}if(!validateInput(email)||!validateInput(password)){toast({title:'Error de Seguridad',description:'Entrada inválida detectada - Se ha registrado el intento',status:'error',duration:3000});return;}setIsLoading(true);try{// Primero, forzar el cierre de todas las sesiones existentes para este usuario\nconst{data:{session:existingSession}}=await supabase.auth.getSession();if(existingSession){// Si hay una sesión existente, primero la cerramos globalmente\nawait supabase.auth.signOut({scope:'global'});toast({title:'Sesión previa detectada',description:'Se han cerrado todas las sesiones activas por seguridad',status:'warning',duration:3000});// Esperar un momento para asegurar que la sesión se cerró\nawait new Promise(resolve=>setTimeout(resolve,1000));}// Verificar si hay sesiones activas para este email específico\nconst{data:{users},error:userError}=await supabase.from('auth.users').select('*').eq('email',email).single();if((users===null||users===void 0?void 0:users.length)>0){// Si encontramos el usuario, forzamos el cierre de sus sesiones\nawait supabase.auth.admin.signOut(users[0].id);}// Ahora sí intentamos el nuevo login\nconst{data,error}=await supabase.auth.signInWithPassword({email,password});if(error)throw error;if(data.user){var _data$session;setAttempts(0);localStorage.removeItem('loginAttempts');localStorage.removeItem('lockUntil');// Almacenar el token de la sesión actual\nlocalStorage.setItem('currentSessionToken',((_data$session=data.session)===null||_data$session===void 0?void 0:_data$session.access_token)||'');toast({title:'Inicio de sesión exitoso',status:'success',duration:2000});navigate('/profile');}}catch(error){const newAttempts=attempts+1;setAttempts(newAttempts);localStorage.setItem('loginAttempts',newAttempts.toString());if(newAttempts>=MAX_ATTEMPTS){handleLockout();}else{toast({title:'Error de autenticación',description:`Credenciales inválidas. Intentos restantes: ${MAX_ATTEMPTS-newAttempts}`,status:'error',duration:3000});}}finally{setIsLoading(false);}};const useTestCredentials=()=>{setEmail(TEST_CREDENTIALS.email);setPassword(TEST_CREDENTIALS.password);};const formatTimeRemaining=seconds=>{const minutes=Math.floor(seconds/60);const remainingSeconds=seconds%60;return`${minutes}:${remainingSeconds.toString().padStart(2,'0')}`;};return/*#__PURE__*/_jsx(Container,{maxW:\"container.sm\",py:10,children:/*#__PURE__*/_jsxs(VStack,{spacing:8,children:[/*#__PURE__*/_jsx(Heading,{children:\"Login Seguro\"}),timeRemaining>0&&/*#__PURE__*/_jsxs(Alert,{status:\"error\",borderRadius:\"md\",children:[/*#__PURE__*/_jsx(AlertIcon,{}),/*#__PURE__*/_jsxs(Box,{flex:\"1\",children:[/*#__PURE__*/_jsx(AlertTitle,{children:\"Cuenta bloqueada\"}),/*#__PURE__*/_jsxs(AlertDescription,{children:[/*#__PURE__*/_jsxs(Text,{mb:2,children:[\"Por favor espere \",formatTimeRemaining(timeRemaining),\" minutos\"]}),/*#__PURE__*/_jsx(Progress,{value:timeRemaining/LOCK_TIME*100,size:\"sm\",colorScheme:\"red\",borderRadius:\"md\"})]})]})]}),/*#__PURE__*/_jsx(Box,{w:\"100%\",bg:\"white\",p:8,borderRadius:\"lg\",boxShadow:\"lg\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(VStack,{spacing:4,children:[/*#__PURE__*/_jsxs(FormControl,{isRequired:true,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Email\"}),/*#__PURE__*/_jsx(Input,{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),bg:\"gray.50\",isDisabled:timeRemaining>0,placeholder:TEST_CREDENTIALS.email})]}),/*#__PURE__*/_jsxs(FormControl,{isRequired:true,children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),bg:\"gray.50\",isDisabled:timeRemaining>0,placeholder:TEST_CREDENTIALS.password})]}),attempts>0&&attempts<MAX_ATTEMPTS&&/*#__PURE__*/_jsxs(Alert,{status:\"warning\",borderRadius:\"md\",children:[/*#__PURE__*/_jsx(AlertIcon,{}),/*#__PURE__*/_jsxs(Box,{flex:\"1\",children:[/*#__PURE__*/_jsx(AlertTitle,{children:\"Advertencia\"}),/*#__PURE__*/_jsxs(AlertDescription,{children:[\"Intentos fallidos: \",attempts,\"/\",MAX_ATTEMPTS,/*#__PURE__*/_jsx(Progress,{value:attempts/MAX_ATTEMPTS*100,size:\"xs\",colorScheme:\"orange\",mt:2})]})]})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",colorScheme:\"blue\",width:\"full\",isLoading:isLoading,isDisabled:timeRemaining>0,children:\"Ingresar\"}),/*#__PURE__*/_jsxs(Box,{p:4,bg:\"gray.50\",borderRadius:\"md\",w:\"full\",children:[/*#__PURE__*/_jsx(Text,{fontSize:\"sm\",color:\"gray.600\",mb:2,children:\"Credenciales de prueba:\"}),/*#__PURE__*/_jsxs(VStack,{align:\"start\",spacing:1,children:[/*#__PURE__*/_jsxs(Text,{fontSize:\"sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",/*#__PURE__*/_jsx(Code,{children:TEST_CREDENTIALS.email})]}),/*#__PURE__*/_jsxs(Text,{fontSize:\"sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Contrase\\xF1a:\"}),\" \",/*#__PURE__*/_jsx(Code,{children:TEST_CREDENTIALS.password})]})]}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline\",mt:2,onClick:useTestCredentials,isDisabled:timeRemaining>0,children:\"Usar credenciales de prueba\"})]})]})})})]})});}","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Box","Button","Container","FormControl","FormLabel","Input","VStack","Heading","useToast","Alert","AlertIcon","AlertTitle","AlertDescription","Text","Code","Progress","supabase","jsx","_jsx","jsxs","_jsxs","LOCK_TIME","MAX_ATTEMPTS","Login","email","setEmail","password","setPassword","isLoading","setIsLoading","attempts","setAttempts","savedAttempts","localStorage","getItem","parseInt","timeRemaining","setTimeRemaining","lockUntil","remaining","Math","max","Date","now","floor","navigate","toast","TEST_CREDENTIALS","timer","setInterval","prev","newTime","removeItem","clearInterval","checkSession","data","session","auth","getSession","validateInput","input","dangerousPatterns","some","pattern","test","handleLockout","setItem","toString","title","description","status","duration","isClosable","handleSubmit","e","preventDefault","padStart","existingSession","signOut","scope","Promise","resolve","setTimeout","users","error","userError","from","select","eq","single","length","admin","id","signInWithPassword","user","_data$session","access_token","newAttempts","useTestCredentials","formatTimeRemaining","seconds","minutes","remainingSeconds","maxW","py","children","spacing","borderRadius","flex","mb","value","size","colorScheme","w","bg","p","boxShadow","onSubmit","isRequired","type","onChange","target","isDisabled","placeholder","mt","width","fontSize","color","align","variant","onClick"],"sources":["/Users/Lenovo/Documents/GitHub/loginseguro/login-seguro-app/src/components/Login.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport {\n  Box,\n  Button,\n  Container,\n  FormControl,\n  FormLabel,\n  Input,\n  VStack,\n  Heading,\n  useToast,\n  Alert,\n  AlertIcon,\n  AlertTitle,\n  AlertDescription,\n  Text,\n  Code,\n  Progress,\n} from '@chakra-ui/react';\nimport { supabase } from '../lib/supabaseClient';\n\nconst LOCK_TIME = 15 * 60; // 15 minutos en segundos\nconst MAX_ATTEMPTS = 3;\n\nexport default function Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [attempts, setAttempts] = useState(() => {\n    const savedAttempts = localStorage.getItem('loginAttempts');\n    return savedAttempts ? parseInt(savedAttempts) : 0;\n  });\n  const [timeRemaining, setTimeRemaining] = useState(() => {\n    const lockUntil = localStorage.getItem('lockUntil');\n    if (lockUntil) {\n      const remaining = Math.max(0, parseInt(lockUntil) - Date.now());\n      return Math.floor(remaining / 1000);\n    }\n    return 0;\n  });\n  \n  const navigate = useNavigate();\n  const toast = useToast();\n\n  const TEST_CREDENTIALS = {\n    email: 'test@test.com',\n    password: 'Test123!'\n  };\n\n  useEffect(() => {\n    let timer: NodeJS.Timeout;\n    if (timeRemaining > 0) {\n      timer = setInterval(() => {\n        setTimeRemaining(prev => {\n          const newTime = prev - 1;\n          if (newTime <= 0) {\n            setAttempts(0);\n            localStorage.removeItem('loginAttempts');\n            localStorage.removeItem('lockUntil');\n            return 0;\n          }\n          return newTime;\n        });\n      }, 1000);\n    }\n    return () => {\n      if (timer) clearInterval(timer);\n    };\n  }, [timeRemaining]);\n\n  useEffect(() => {\n    const checkSession = async () => {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (session) {\n        navigate('/profile');\n      }\n    };\n    checkSession();\n  }, [navigate]);\n\n  const validateInput = (input: string) => {\n    const dangerousPatterns = [\n      /SELECT.*FROM/i,\n      /INSERT.*INTO/i,\n      /UPDATE.*SET/i,\n      /DELETE.*FROM/i,\n      /<script>/i,\n      /'/,\n      /;/,\n      /--/\n    ];\n    return !dangerousPatterns.some(pattern => pattern.test(input));\n  };\n\n  const handleLockout = () => {\n    const lockUntil = Date.now() + (LOCK_TIME * 1000);\n    localStorage.setItem('lockUntil', lockUntil.toString());\n    setTimeRemaining(LOCK_TIME);\n    toast({\n      title: 'Cuenta bloqueada',\n      description: `Demasiados intentos fallidos. Por favor espere 15 minutos.`,\n      status: 'error',\n      duration: 5000,\n      isClosable: false,\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (timeRemaining > 0) {\n      toast({\n        title: 'Cuenta bloqueada',\n        description: `Por favor espere ${Math.floor(timeRemaining / 60)}:${(timeRemaining % 60).toString().padStart(2, '0')} minutos`,\n        status: 'error',\n        duration: 5000,\n      });\n      return;\n    }\n\n    if (!validateInput(email) || !validateInput(password)) {\n      toast({\n        title: 'Error de Seguridad',\n        description: 'Entrada inválida detectada - Se ha registrado el intento',\n        status: 'error',\n        duration: 3000,\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      // Primero, forzar el cierre de todas las sesiones existentes para este usuario\n      const { data: { session: existingSession } } = await supabase.auth.getSession();\n      \n      if (existingSession) {\n        // Si hay una sesión existente, primero la cerramos globalmente\n        await supabase.auth.signOut({ scope: 'global' });\n        toast({\n          title: 'Sesión previa detectada',\n          description: 'Se han cerrado todas las sesiones activas por seguridad',\n          status: 'warning',\n          duration: 3000,\n        });\n        // Esperar un momento para asegurar que la sesión se cerró\n        await new Promise(resolve => setTimeout(resolve, 1000));\n      }\n\n      // Verificar si hay sesiones activas para este email específico\n      const { data: { users }, error: userError } = await supabase\n        .from('auth.users')\n        .select('*')\n        .eq('email', email)\n        .single();\n\n      if (users?.length > 0) {\n        // Si encontramos el usuario, forzamos el cierre de sus sesiones\n        await supabase.auth.admin.signOut(users[0].id);\n      }\n\n      // Ahora sí intentamos el nuevo login\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email,\n        password,\n      });\n\n      if (error) throw error;\n\n      if (data.user) {\n        setAttempts(0);\n        localStorage.removeItem('loginAttempts');\n        localStorage.removeItem('lockUntil');\n        \n        // Almacenar el token de la sesión actual\n        localStorage.setItem('currentSessionToken', data.session?.access_token || '');\n        \n        toast({\n          title: 'Inicio de sesión exitoso',\n          status: 'success',\n          duration: 2000,\n        });\n        \n        navigate('/profile');\n      }\n    } catch (error: any) {\n      const newAttempts = attempts + 1;\n      setAttempts(newAttempts);\n      localStorage.setItem('loginAttempts', newAttempts.toString());\n      \n      if (newAttempts >= MAX_ATTEMPTS) {\n        handleLockout();\n      } else {\n        toast({\n          title: 'Error de autenticación',\n          description: `Credenciales inválidas. Intentos restantes: ${MAX_ATTEMPTS - newAttempts}`,\n          status: 'error',\n          duration: 3000,\n        });\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const useTestCredentials = () => {\n    setEmail(TEST_CREDENTIALS.email);\n    setPassword(TEST_CREDENTIALS.password);\n  };\n\n  const formatTimeRemaining = (seconds: number) => {\n    const minutes = Math.floor(seconds / 60);\n    const remainingSeconds = seconds % 60;\n    return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\n  };\n\n  return (\n    <Container maxW=\"container.sm\" py={10}>\n      <VStack spacing={8}>\n        <Heading>Login Seguro</Heading>\n        \n        {timeRemaining > 0 && (\n          <Alert status=\"error\" borderRadius=\"md\">\n            <AlertIcon />\n            <Box flex=\"1\">\n              <AlertTitle>Cuenta bloqueada</AlertTitle>\n              <AlertDescription>\n                <Text mb={2}>\n                  Por favor espere {formatTimeRemaining(timeRemaining)} minutos\n                </Text>\n                <Progress \n                  value={(timeRemaining / LOCK_TIME) * 100} \n                  size=\"sm\" \n                  colorScheme=\"red\" \n                  borderRadius=\"md\"\n                />\n              </AlertDescription>\n            </Box>\n          </Alert>\n        )}\n\n        <Box w=\"100%\" bg=\"white\" p={8} borderRadius=\"lg\" boxShadow=\"lg\">\n          <form onSubmit={handleSubmit}>\n            <VStack spacing={4}>\n              <FormControl isRequired>\n                <FormLabel>Email</FormLabel>\n                <Input\n                  type=\"email\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  bg=\"gray.50\"\n                  isDisabled={timeRemaining > 0}\n                  placeholder={TEST_CREDENTIALS.email}\n                />\n              </FormControl>\n\n              <FormControl isRequired>\n                <FormLabel>Contraseña</FormLabel>\n                <Input\n                  type=\"password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  bg=\"gray.50\"\n                  isDisabled={timeRemaining > 0}\n                  placeholder={TEST_CREDENTIALS.password}\n                />\n              </FormControl>\n\n              {attempts > 0 && attempts < MAX_ATTEMPTS && (\n                <Alert status=\"warning\" borderRadius=\"md\">\n                  <AlertIcon />\n                  <Box flex=\"1\">\n                    <AlertTitle>Advertencia</AlertTitle>\n                    <AlertDescription>\n                      Intentos fallidos: {attempts}/{MAX_ATTEMPTS}\n                      <Progress \n                        value={(attempts / MAX_ATTEMPTS) * 100} \n                        size=\"xs\" \n                        colorScheme=\"orange\" \n                        mt={2} \n                      />\n                    </AlertDescription>\n                  </Box>\n                </Alert>\n              )}\n\n              <Button\n                type=\"submit\"\n                colorScheme=\"blue\"\n                width=\"full\"\n                isLoading={isLoading}\n                isDisabled={timeRemaining > 0}\n              >\n                Ingresar\n              </Button>\n\n              <Box \n                p={4} \n                bg=\"gray.50\" \n                borderRadius=\"md\" \n                w=\"full\"\n              >\n                <Text fontSize=\"sm\" color=\"gray.600\" mb={2}>\n                  Credenciales de prueba:\n                </Text>\n                <VStack align=\"start\" spacing={1}>\n                  <Text fontSize=\"sm\">\n                    <strong>Email:</strong> <Code>{TEST_CREDENTIALS.email}</Code>\n                  </Text>\n                  <Text fontSize=\"sm\">\n                    <strong>Contraseña:</strong> <Code>{TEST_CREDENTIALS.password}</Code>\n                  </Text>\n                </VStack>\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  mt={2}\n                  onClick={useTestCredentials}\n                  isDisabled={timeRemaining > 0}\n                >\n                  Usar credenciales de prueba\n                </Button>\n              </Box>\n            </VStack>\n          </form>\n        </Box>\n      </VStack>\n    </Container>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
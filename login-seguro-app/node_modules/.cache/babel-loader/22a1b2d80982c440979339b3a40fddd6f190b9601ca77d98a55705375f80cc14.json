{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{Box,Container,VStack,Heading,Text,Button,Alert,AlertIcon,useToast,Table,Tbody,Tr,Td,Badge,Code,Modal,ModalOverlay,ModalContent,ModalHeader,ModalBody}from'@chakra-ui/react';import{supabase}from'../lib/supabaseClient';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Profile(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[sessionInfo,setSessionInfo]=useState(null);const[showSessionEndedModal,setShowSessionEndedModal]=useState(false);const navigate=useNavigate();const toast=useToast();// Verificación constante de sesión\nuseEffect(()=>{let isComponentMounted=true;const checkSessionValidity=async()=>{try{const{data:{session}}=await supabase.auth.getSession();if(!session||!isComponentMounted)return;// Verificar la sesión en la tabla de tracking\nconst{data:sessionData}=await supabase.from('user_session_tracking').select('*').eq('email',session.user.email).single();// Si no hay datos de tracking o la última sesión es diferente, cerrar\nif(!(sessionData!==null&&sessionData!==void 0&&sessionData.last_session_at)||sessionData.user_id!==session.user.id){console.log('Sesión invalidada, cerrando...');setShowSessionEndedModal(true);await handleSessionEnd();return;}// Verificar si hay una sesión más reciente\nconst currentTimestamp=new Date(sessionData.last_session_at).getTime();const{data:newerSession}=await supabase.from('user_session_tracking').select('*').eq('email',session.user.email).gt('last_session_at',sessionData.last_session_at).limit(1).maybeSingle();if(newerSession){console.log('Se detectó una sesión más reciente');setShowSessionEndedModal(true);await handleSessionEnd();return;}// Actualizar timestamp solo si somos la sesión activa\nif(sessionData.user_id===session.user.id){await supabase.from('user_session_tracking').update({last_session_at:new Date().toISOString()}).eq('user_id',session.user.id);}}catch(error){console.error('Error checking session:',error);}};// Verificar inmediatamente y luego cada segundo\ncheckSessionValidity();const interval=setInterval(checkSessionValidity,1000);// Suscribirse a cambios en la tabla de tracking\nconst subscription=supabase.channel('session_changes').on('postgres_changes',{event:'*',schema:'public',table:'user_session_tracking'},async payload=>{console.log('Cambio detectado en sesiones:',payload);await checkSessionValidity();}).subscribe();return()=>{isComponentMounted=false;clearInterval(interval);subscription.unsubscribe();};},[]);// Auth state listener\nuseEffect(()=>{checkUser();const{data:authListener}=supabase.auth.onAuthStateChange((event,session)=>{if(event==='SIGNED_OUT'||!session){navigate('/');}else{setUser(session.user);setSessionInfo(session);}});return()=>{if(authListener&&authListener.subscription){authListener.subscription.unsubscribe();}};},[navigate]);const handleSessionEnd=async()=>{try{await supabase.auth.signOut();navigate('/');}catch(error){console.error('Error al cerrar sesión:',error);}};const checkUser=async()=>{try{const{data:{session},error}=await supabase.auth.getSession();if(error||!session){navigate('/');return;}setUser(session.user);setSessionInfo(session);const tokenExpiry=new Date((session.expires_at||0)*1000);if(tokenExpiry<=new Date()){throw new Error('Sesión expirada');}}catch(error){console.error('Error:',error);toast({title:'Error de sesión',description:error.message,status:'error',duration:3000});navigate('/');}finally{setLoading(false);}};const handleSignOut=async()=>{try{await supabase.auth.signOut();navigate('/');}catch(error){toast({title:'Error al cerrar sesión',description:error.message,status:'error',duration:3000});}};const formatDate=date=>{return new Intl.DateTimeFormat('es-ES',{dateStyle:'medium',timeStyle:'medium'}).format(date);};if(loading){return/*#__PURE__*/_jsx(Container,{maxW:\"container.sm\",py:10,children:/*#__PURE__*/_jsx(Text,{children:\"Verificando sesi\\xF3n...\"})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Container,{maxW:\"container.sm\",py:10,children:/*#__PURE__*/_jsxs(VStack,{spacing:8,children:[/*#__PURE__*/_jsx(Heading,{children:\"Perfil de Usuario\"}),/*#__PURE__*/_jsxs(Alert,{status:\"success\",borderRadius:\"md\",children:[/*#__PURE__*/_jsx(AlertIcon,{}),\"Sesi\\xF3n activa y segura\"]}),/*#__PURE__*/_jsx(Box,{w:\"100%\",bg:\"white\",p:8,borderRadius:\"lg\",boxShadow:\"lg\",children:/*#__PURE__*/_jsxs(VStack,{spacing:4,align:\"stretch\",children:[/*#__PURE__*/_jsx(Heading,{size:\"md\",mb:4,children:\"Informaci\\xF3n de la Sesi\\xF3n\"}),/*#__PURE__*/_jsx(Table,{variant:\"simple\",children:/*#__PURE__*/_jsxs(Tbody,{children:[/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Td,{fontWeight:\"bold\",children:\"Email:\"}),/*#__PURE__*/_jsx(Td,{children:user===null||user===void 0?void 0:user.email})]}),/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Td,{fontWeight:\"bold\",children:\"ID de Usuario:\"}),/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsx(Code,{children:user===null||user===void 0?void 0:user.id})})]}),/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Td,{fontWeight:\"bold\",children:\"\\xDAltimo acceso:\"}),/*#__PURE__*/_jsx(Td,{children:formatDate(new Date(user===null||user===void 0?void 0:user.last_sign_in_at))})]}),/*#__PURE__*/_jsxs(Tr,{children:[/*#__PURE__*/_jsx(Td,{fontWeight:\"bold\",children:\"Expira en:\"}),/*#__PURE__*/_jsx(Td,{children:/*#__PURE__*/_jsx(Badge,{colorScheme:\"green\",children:formatDate(new Date((sessionInfo===null||sessionInfo===void 0?void 0:sessionInfo.expires_at)*1000))})})]})]})}),/*#__PURE__*/_jsx(Button,{colorScheme:\"red\",onClick:handleSignOut,mt:4,children:\"Cerrar Sesi\\xF3n\"})]})})]})}),/*#__PURE__*/_jsxs(Modal,{isOpen:showSessionEndedModal,onClose:()=>{},closeOnOverlayClick:false,children:[/*#__PURE__*/_jsx(ModalOverlay,{}),/*#__PURE__*/_jsxs(ModalContent,{children:[/*#__PURE__*/_jsx(ModalHeader,{children:\"Sesi\\xF3n Finalizada\"}),/*#__PURE__*/_jsxs(ModalBody,{children:[/*#__PURE__*/_jsxs(Alert,{status:\"warning\",mb:4,children:[/*#__PURE__*/_jsx(AlertIcon,{}),/*#__PURE__*/_jsx(Text,{children:\"Se ha iniciado sesi\\xF3n en otro dispositivo. Esta sesi\\xF3n ha sido cerrada.\"})]}),/*#__PURE__*/_jsx(Text,{children:\"Redirigiendo a la p\\xE1gina de inicio de sesi\\xF3n...\"})]})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Box","Container","VStack","Heading","Text","Button","Alert","AlertIcon","useToast","Table","Tbody","Tr","Td","Badge","Code","Modal","ModalOverlay","ModalContent","ModalHeader","ModalBody","supabase","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","user","setUser","loading","setLoading","sessionInfo","setSessionInfo","showSessionEndedModal","setShowSessionEndedModal","navigate","toast","isComponentMounted","checkSessionValidity","data","session","auth","getSession","sessionData","from","select","eq","email","single","last_session_at","user_id","id","console","log","handleSessionEnd","currentTimestamp","Date","getTime","newerSession","gt","limit","maybeSingle","update","toISOString","error","interval","setInterval","subscription","channel","on","event","schema","table","payload","subscribe","clearInterval","unsubscribe","checkUser","authListener","onAuthStateChange","signOut","tokenExpiry","expires_at","Error","title","description","message","status","duration","handleSignOut","formatDate","date","Intl","DateTimeFormat","dateStyle","timeStyle","format","maxW","py","children","spacing","borderRadius","w","bg","p","boxShadow","align","size","mb","variant","fontWeight","last_sign_in_at","colorScheme","onClick","mt","isOpen","onClose","closeOnOverlayClick"],"sources":["/Users/Lenovo/Documents/GitHub/loginseguro/login-seguro-app/src/components/Profile.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { AuthChangeEvent } from '@supabase/supabase-js';\nimport {\n  Box,\n  Container,\n  VStack,\n  Heading,\n  Text,\n  Button,\n  Alert,\n  AlertIcon,\n  useToast,\n  Table,\n  Tbody,\n  Tr,\n  Td,\n  Badge,\n  Code,\n  Modal,\n  ModalOverlay,\n  ModalContent,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n} from '@chakra-ui/react';\nimport { supabase } from '../lib/supabaseClient';\n\nexport default function Profile() {\n  const [user, setUser] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [sessionInfo, setSessionInfo] = useState<any>(null);\n  const [showSessionEndedModal, setShowSessionEndedModal] = useState(false);\n  const navigate = useNavigate();\n  const toast = useToast();\n\n  // Verificación constante de sesión\n  useEffect(() => {\n    let isComponentMounted = true;\n\n    const checkSessionValidity = async () => {\n      try {\n        const { data: { session } } = await supabase.auth.getSession();\n        if (!session || !isComponentMounted) return;\n\n        // Verificar la sesión en la tabla de tracking\n        const { data: sessionData } = await supabase\n          .from('user_session_tracking')\n          .select('*')\n          .eq('email', session.user.email)\n          .single();\n\n        // Si no hay datos de tracking o la última sesión es diferente, cerrar\n        if (!sessionData?.last_session_at || \n            sessionData.user_id !== session.user.id) {\n          console.log('Sesión invalidada, cerrando...');\n          setShowSessionEndedModal(true);\n          await handleSessionEnd();\n          return;\n        }\n\n        // Verificar si hay una sesión más reciente\n        const currentTimestamp = new Date(sessionData.last_session_at).getTime();\n        const { data: newerSession } = await supabase\n          .from('user_session_tracking')\n          .select('*')\n          .eq('email', session.user.email)\n          .gt('last_session_at', sessionData.last_session_at)\n          .limit(1)\n          .maybeSingle();\n\n        if (newerSession) {\n          console.log('Se detectó una sesión más reciente');\n          setShowSessionEndedModal(true);\n          await handleSessionEnd();\n          return;\n        }\n\n        // Actualizar timestamp solo si somos la sesión activa\n        if (sessionData.user_id === session.user.id) {\n          await supabase\n            .from('user_session_tracking')\n            .update({ last_session_at: new Date().toISOString() })\n            .eq('user_id', session.user.id);\n        }\n      } catch (error) {\n        console.error('Error checking session:', error);\n      }\n    };\n\n    // Verificar inmediatamente y luego cada segundo\n    checkSessionValidity();\n    const interval = setInterval(checkSessionValidity, 1000);\n\n    // Suscribirse a cambios en la tabla de tracking\n    const subscription = supabase\n      .channel('session_changes')\n      .on('postgres_changes', \n          { event: '*', schema: 'public', table: 'user_session_tracking' }, \n          async (payload) => {\n            console.log('Cambio detectado en sesiones:', payload);\n            await checkSessionValidity();\n          })\n      .subscribe();\n\n    return () => {\n      isComponentMounted = false;\n      clearInterval(interval);\n      subscription.unsubscribe();\n    };\n  }, []);\n\n  // Auth state listener\n  useEffect(() => {\n    checkUser();\n    const { data: authListener } = supabase.auth.onAuthStateChange((event, session) => {\n      if (event === 'SIGNED_OUT' || !session) {\n        navigate('/');\n      } else {\n        setUser(session.user);\n        setSessionInfo(session);\n      }\n    });\n\n    return () => {\n      if (authListener && authListener.subscription) {\n        authListener.subscription.unsubscribe();\n      }\n    };\n  }, [navigate]);\n\n  const handleSessionEnd = async () => {\n    try {\n      await supabase.auth.signOut();\n      navigate('/');\n    } catch (error) {\n      console.error('Error al cerrar sesión:', error);\n    }\n  };\n\n  const checkUser = async () => {\n    try {\n      const { data: { session }, error } = await supabase.auth.getSession();\n      if (error || !session) {\n        navigate('/');\n        return;\n      }\n\n      setUser(session.user);\n      setSessionInfo(session);\n\n      const tokenExpiry = new Date((session.expires_at || 0) * 1000);\n      if (tokenExpiry <= new Date()) {\n        throw new Error('Sesión expirada');\n      }\n    } catch (error: any) {\n      console.error('Error:', error);\n      toast({\n        title: 'Error de sesión',\n        description: error.message,\n        status: 'error',\n        duration: 3000,\n      });\n      navigate('/');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSignOut = async () => {\n    try {\n      await supabase.auth.signOut();\n      navigate('/');\n    } catch (error: any) {\n      toast({\n        title: 'Error al cerrar sesión',\n        description: error.message,\n        status: 'error',\n        duration: 3000,\n      });\n    }\n  };\n\n  const formatDate = (date: Date) => {\n    return new Intl.DateTimeFormat('es-ES', {\n      dateStyle: 'medium',\n      timeStyle: 'medium'\n    }).format(date);\n  };\n\n  if (loading) {\n    return (\n      <Container maxW=\"container.sm\" py={10}>\n        <Text>Verificando sesión...</Text>\n      </Container>\n    );\n  }\n\n  return (\n    <>\n      <Container maxW=\"container.sm\" py={10}>\n        <VStack spacing={8}>\n          <Heading>Perfil de Usuario</Heading>\n          \n          <Alert status=\"success\" borderRadius=\"md\">\n            <AlertIcon />\n            Sesión activa y segura\n          </Alert>\n\n          <Box w=\"100%\" bg=\"white\" p={8} borderRadius=\"lg\" boxShadow=\"lg\">\n            <VStack spacing={4} align=\"stretch\">\n              <Heading size=\"md\" mb={4}>Información de la Sesión</Heading>\n              \n              <Table variant=\"simple\">\n                <Tbody>\n                  <Tr>\n                    <Td fontWeight=\"bold\">Email:</Td>\n                    <Td>{user?.email}</Td>\n                  </Tr>\n                  <Tr>\n                    <Td fontWeight=\"bold\">ID de Usuario:</Td>\n                    <Td><Code>{user?.id}</Code></Td>\n                  </Tr>\n                  <Tr>\n                    <Td fontWeight=\"bold\">Último acceso:</Td>\n                    <Td>{formatDate(new Date(user?.last_sign_in_at))}</Td>\n                  </Tr>\n                  <Tr>\n                    <Td fontWeight=\"bold\">Expira en:</Td>\n                    <Td>\n                      <Badge colorScheme=\"green\">\n                        {formatDate(new Date(sessionInfo?.expires_at * 1000))}\n                      </Badge>\n                    </Td>\n                  </Tr>\n                </Tbody>\n              </Table>\n\n              <Button\n                colorScheme=\"red\"\n                onClick={handleSignOut}\n                mt={4}\n              >\n                Cerrar Sesión\n              </Button>\n            </VStack>\n          </Box>\n        </VStack>\n      </Container>\n\n      <Modal isOpen={showSessionEndedModal} onClose={() => {}} closeOnOverlayClick={false}>\n        <ModalOverlay />\n        <ModalContent>\n          <ModalHeader>Sesión Finalizada</ModalHeader>\n          <ModalBody>\n            <Alert status=\"warning\" mb={4}>\n              <AlertIcon />\n              <Text>\n                Se ha iniciado sesión en otro dispositivo. Esta sesión ha sido cerrada.\n              </Text>\n            </Alert>\n            <Text>Redirigiendo a la página de inicio de sesión...</Text>\n          </ModalBody>\n        </ModalContent>\n      </Modal>\n    </>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}